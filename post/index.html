<!doctype html><html lang=fr-fr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Les articles d'une agence Magento</title><meta name=description content="Vous cherchez des informations sur le développement, le déploiement continu ? C'est ici."><meta name=robots content="INDEX,FOLLOW"><link rel=apple-touch-icon sizes=180x180 href=https://lumao.eu/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://lumao.eu/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://lumao.eu/favicon-16x16.png><link rel=manifest href=https://lumao.eu/site.webmanifest><link rel=mask-icon href=https://lumao.eu/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#da532c"><link rel=alternate hreflang=fr-fr href=https://lumao.eu/post/><link rel=alternate hreflang=x-default href=https://lumao.eu/post/><link rel=alternate hreflang=fr-ch href=https://lumao.ch/post/><link rel=alternate hreflang=fr-be href=https://be.lumao.eu/post/><link rel=alternate hreflang=fr-lu href=https://lu.lumao.eu/post/><link href=https://lumao.eu/post/index.xml rel=feed type=application/rss+xml title="Développement Magento"><meta name=generator content="Hugo 0.74.2"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PXRXBBS');</script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PXRXBBS" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><header class=header><div class=container><div class=row><div class=col-sm-3><a class="animsition-link site-logo" href=https://lumao.eu/><img src=https://lumao.eu/agence_magento.svg alt="Lumao - Développement Magento"></a></div><div class=col-sm-9><nav id=site-nav class=nav-toggle><ul class=menu><li><a href=https://lumao.eu/><i class="fa fa-code" aria-hidden=true></i>Développeur Magento</a></li><li><a href=https://lumao.eu/ecommerce/cms/magento/><i class="fa fa-codepen" aria-hidden=true></i>Magento</a></li><li><a href=# data-goto=/reference/><i class="fa fa-connectdevelop" aria-hidden=true></i>Réalisations</a></li><li><a href=# data-goto=/post/contact/><i class="fa fa-comments" aria-hidden=true></i>Contact</a></li></ul></nav></div></div></div></header><div class="container section" style=padding-top:90px><div class=title-block><h1 class=title-big>Blog Magento 2</h1></div><div class=section-about><article><h2><a href=https://lumao.eu/post/magento-cloud-maj-mysql/>Comment mettre à jour MySQL sur Magento Cloud ?</a></h2><div>Vous venez de changer la version de MySQL dans le fichier de configuration de Magento Cloud et vous avez une erreur ? Pas de panique, c&rsquo;est une &ldquo;fonctionnalité&rdquo; ;)
En effet, MySQL est lancé dans un containeur, si on change la version, il faut habituellement lancer un mysql_upgrade. Sauf que, bien entendu, on a pas accès au containeur.
Voici l&rsquo;erreur qu&rsquo;on a sur la CI :
Error: Environment redeployment failed Please contact support for more information, specifying event ids: 1234 Ce qui donne :</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/>Les articles d'une agence Magento</a></h2><div></div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/magento-ou-custom/>Magento ou développement sur mesure ?</a></h2><div>Magento est un CMS e-commerce bien connu, il repose sur de nombreuses couches open-source dont Zend Framework et Symfony.
Un développement sur mesure repose en général sur un framework, souvent sur Laravel ou du Symfony.
Solution Magento Magento a, de base, une liste de fonctionnalités très étendue, voici une partie du fonctionnel.
Le projet est vieux, la première version est sortie en 2008. Sur la version 2, il y a plus de 100 000 commits, un commit étant une contribution d&rsquo;un développeur.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/adobecloud-gitlab/>Comment brancher le Cloud Magento 2 sur un repo Gitlab ?</a></h2><div>Comment brancher le Cloud Magento/Adobe sur un repo Gitlab ?
Etape 1 : créer un token sur un utilisateur Gitlab On va sur notre instance Gitlab, Profil => Settings => Access Tokens => Add a personal access token
Ce qui donne :
Etape 2 : installer le phar magento-cloud https://devdocs.magento.com/cloud/before/before-workspace-magento-prereqs.html#cloud-ssh-cli-cli-install
Etape 3 : faire le lien dans Magento Cloud Tout est dans la commande magento-cloud integration:add, il y a une GUI qui permets de faire la suite.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/git-revert-merge/>Git revert merge</a></h2><div>Parfois, le pire arrive, quelqu&rsquo;un merge la branche de préproduction dans sa branche. Plutôt que de recréer la branche et faire du cherry pick en priant pour ne pas se tromper on peut faire plus simple.
Voici l&rsquo;état de départ :
Ici le commit fautif est le 709b89fd.
Pour l&rsquo;annuler, c&rsquo;est simple :
git revert -m 1 709b89fd L&rsquo;historique sera pourrit mais vous aurez les bons fichiers.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/menu-snowdog/>Créer un menu riche avec Snowdog Menu</a></h2><div>Tuto rapide expliquant comment utiliser le module de menu Snowdog Menu sous Magento 2
Front Le menu est composé de 3 parties :
Menu principal, toujours visible, au clic on affiche les parties 2/3.
La liste des sous-catégories.
Le contenu mis en avant.
Bannière promo optionnelle Liste de produits optionnelle Back Menu On utilise 3 composants du menu :</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/cloudflare-magento-2/>Récupérer l'adresse IP des visiteurs avec CloudFlare</a></h2><div>Si vous utilisez le CDN CloudFlare et que vous souhaitez mettre votre e-commerce en mode maintenance, vous avez surement remarqué que la liste blanche ne fonctionne plus, c&rsquo;est normal, CloudFlare est un Reverse Proxy, vous voyez son IP et plus celle du visiteur.
Comment récupérer la véritable adresse IP des visiteurs avec CloudFlare ? C&rsquo;est simple, il suffit de changer l&rsquo;injection de dépendance pour récupérer le header HTTP_CF_CONNECTING_IP au lieu de REMOTE_ADDR.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/job-bizdev/>Recrutement Business Developer</a></h2><div>Qui sommes-nous ?
Vos principales missions Vous prospectez des clients B2B ayant envie d&rsquo;ouvrir un site de vente en ligne.
Vous prospectez des clients B2C ayant déjà un site sous Magento afin de récupérer la TMA.
Vous intervenez sur l’ensemble du cycle de vente depuis la génération de demandes jusqu’à la négociation et la conclusion des contrats,
Vous suivez ensuite votre client dans une optique de fidélisation et de développement de chiffre d’affaires,</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/job-cdp/>Recrutement Chef de projet technique Magento</a></h2><div>Qui sommes-nous ?
Périmètre : projet/TMA
Vos principales missions Gérer la communication (téléphone, email) avec les clients. Les accompagner, quand ils ouvrent un ticket par email/téléphone, leur explique qu&rsquo;il faut le mettre dans l&rsquo;outil de ticketing.
Gérer le planning et les priorités des développeurs.
Pouvoir résoudre des &ldquo;petits problèmes&rdquo; de TMA sans l&rsquo;aide de développeur. Exemple : suivre une documentation pour faire des requêtes SQL, changer une couleur en CSS, faire de la contribution, créer/débugger des règles de promotions, modifier des règles de frais de ports (config bo/json), former les clients (bo, merchandising), les rencontrer (mettre une chemise, un tailleur).</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/test-gitlab-ci/>Tester un script Gitlab CI</a></h2><div>Quand on fait des scripts de déploiement via Gitlab CI, on réussit rarement du premier coup. Pour éviter quelques commits, c&rsquo;est intéressant de tester le script de Gitlab CI en local.
Ca vous évitera la review et les moqueries des collègues.
Pour ça, il faut &ldquo;juste&rdquo; avoir Docker et Gitlab-Runner sur son pc.
Gitlab Runner C&rsquo;est ici : https://docs.gitlab.com/runner/install/
gitlab-runner install
gitlab-runner start
gitlab-runner exec docker deploy_preproduction &ndash;env SERVER_IP=1.2.3.4 &ndash;env SERVER_PASSWORD=password &ndash;env SERVER_PORT=22 &ndash;env SERVER_USER=deploy</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/docker-sync/>Docker Sync</a></h2><div>Eviter facilement les problèmes de synchronisation de fichiers sur Windows/Mac.
Docker Sync http://docker-sync.io/
docker-sync.yml
version: '2' options: compose-dev-file-path: 'docker-compose.yml' verbose: true syncs: poc-magento2-sync: src: ./ sync_userid: '33' sync_excludes: [ '.idea', '.buildpath', '.project', '.settings', '.DS_Store', '.gitlab-ci.yml', 'generated', 'setup', 'vendor', 'var' ] watch_excludes: [ '.idea', '.buildpath', '.project', '.settings', '.DS_Store', '.gitlab-ci.yml', 'generated', 'setup', 'vendor', 'var' ] docker-sync start docker-compose.yml
version: "2" services: php: image: lavoweb/php-7.0:xdebug expose: - 80 volumes: - app_sync:/var/www/html volumes: app_sync: external: name: poc-magento2-sync docker-compose up -d</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/openvpn-docker/>Configurer OpenVPN avec Docker</a></h2><div>Un article très court aujourd&rsquo;hui pour monter un VPN sur un serveur avec docker-compose en quelques minutes.
Serveur OpenVPN Très simple, on crée un répertoire openvpn et on met le fichier docker-compose.yml :
openvpn: image: 'kylemanna/openvpn' volumes: - './data:/etc/openvpn' ports: - "1194:1194/udp" cap_add: - NET_ADMIN restart: always Pour ajouter le support ipv6, il faut malheureusement lancer le containeur en root :
privileged: true On fait la configuration :
docker run --name openvpn_openvpn_1 -v /etc/openvpn busybox docker run --volumes-from openvpn_openvpn_1 --rm kylemanna/openvpn ovpn_genconfig -u udp://VPN.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/job-magento/>Recrutement développeur Magento</a></h2><div>Avant toute chose, l&rsquo;offre est pour plusieurs profils, c&rsquo;est normal de ne pas avoir toutes les compétences !
Qui sommes-nous ?
On recherche un développeur Magento confirmé en télétravail (on paye l&rsquo;espace de coworking si besoin). Tu peux travailler de n’importe où avec une bonne connexion, même à l’étranger si cela n’influence pas ta productivité. Si la stack technique te botte mais que tu es junior, c&rsquo;est possible également de te former (uniquement sur Annecy) si tu es étudiant ou si tu as des compétences en graphisme/ops.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/charte-vp/>Charte sur le respect de la vie privée</a></h2><div>Date de dernière mise à jour : 09/03/2018
La présente charte sur le respect de la vie privée (la « Charte ») a pour objectif de formaliser notre engagement quant au respect de la vie privée des utilisateurs du site internet lumao.eu exploité par Lumao SASU.
La Charte est régie par les Conditions Générales d&rsquo;Utilisation du Site. Tous les termes en majuscules non-définis dans la présente Charte sont définis dans les Conditions Générales d&rsquo;Utilisation.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/cgs/>Conditions Générales de Services</a></h2><div>Date de dernière mise à jour : 08/03/2018
Article 1 – MENTION LÉGALES Le présent site, accessible à l&rsquo;URL https://lumao.eu/ (le « Site »), est édité par :
Lumao, SASU au capital de 100 euros, inscrite au R.C.S. d&rsquo;Annecy sous le numéro 835305657, dont le siège social est situé au Lumao AXALP SERVICES 1 place Marie Curie 74000 Annecy, représenté(e) par Lavorel Aurélien dûment habilité(e),
(Ci-après désigné le « Vendeur »).</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/sftp-docker/>Connexion SFTP avec Docker</a></h2><div>Comment accéder au contenu sur vos containeurs Docker ?
Comme sur les autres, via (s)ftp.
SFTP Pourquoi faire ça Dans la logique **DevOps**, on ne va pas utiliser la connexion sftp pour modifier le code directement en prod, non on a le déploiement automatique et ça sera écrasé. Par contre, les webmasteurs ont surement besoin de modifier ou d&rsquo;ajouter régulièrement des médias au site. Il ne faut pas les versionner, c&rsquo;est pour cet usecase qu&rsquo;on va faire un containeur sftp.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/aws-docker-deploy/>Elastic Beanstalk déployer containeur Docker</a></h2><div>On a vu comment déployer automatiquement du code quand on push sur une branche. Maintenant, il est temps de customiser le déploiement pour mettre nos containeurs.
Configuration Beanstalk (EB) Pas grand chose à faire, si vous avez ceci dans votre tableau de bord, c'est bon : ![AWS EB Docker](/images/10/beanstalk.png) Dockerfile Au déploiement, EB va lire les fichiers **Dockerfile** et **Dockerrun.aws.json**, on va rester sur le premier vu qu'on connait déjà. Dans le principe, EB va éxecuter le containeur et le publier une fois qu&rsquo;il aura fini.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/magento-ses/>Envoyer des mails via Amazon SES sur Magento 2</a></h2><div>Comment envoyer des e-mails via Amazon Simple Email Service pour un site sous Magento 2 ?
Il y a 3 étapes :
Configurer le compte Amazon
Changer les DNS
Valider les e-mails
Installer/Configurer une extension Magento
Amazon Pour une fois, on ne peut pas utiliser le service depuis beaucoup de zones, en Europe ce sera l&rsquo;Irlande (eu-west-1 pour les intimes).</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/gitlab-aws/>Gitlab CI + AWS</a></h2><div>Aujourd&rsquo;hui, on va voir comment faire un déploiement automatique (Continuous Deployment, CD pour la suite) au push sur une branche de Gitlab.
Alternatives à Gitlab Tout d&rsquo;abord quelques alternatives à Gitlab CI, il y en a beaucoup d&rsquo;autres.
Travis CI CircleCI Jenkins Bamboo &mldr; Alternatives à AWS Vous pouvez brancher n&rsquo;importe quoi comme système de déploiement, du moment que vous arrivez à lancer le déploiement depuis un containeur Docker.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/contact/>Contact Lumao</a></h2><div>Intéressé pour en savoir plus sur notre expertise certifiée par Magento ?
N&rsquo;hésitez pas à parler de votre projet.
+33 (0)4 58 10 14 18
via ce formulaire
Envoyer un message</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/developpement-laravel/>Développement Laravel</a></h2><div>Laravel est un framework PHP très tendance dans le monde du développement. Il a été créé par Taylor Otwell en juin 2011.
Il a tout de suite été adopté par de nombreux développeurs (nous les premiers) car il est très simple à prendre en main, il est fourni comme un service, contrairement aux autres, ce n&rsquo;est pas une contrainte de l&rsquo;utiliser.
Création d'APIs Laravel permet de créer une API en quelques clics, c'est adapté pour faire un prototype pour des startups.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/job-apporteur-affaire/>Recrutement freelance apporteur d'affaire</a></h2><div>Qui sommes-nous ?
Bonjour,
On recherche un business developer/apporteur d&rsquo;affaire capable d&rsquo;apporter des projets e-commerce de grande envergure : 25-200k.
On propose une rémunération à la commission. C&rsquo;est possible de faire de la marque blanche.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/job-secretaire/>Recrutement secrétaire freelance</a></h2><div>Qui sommes-nous ?
Toujours en recherche
Bonjour,
On recherche un secrétaire freelance sur Annecy pour gérer les &ldquo;papiers&rdquo; de l&rsquo;entreprise.
Récupérer les factures sur différents sites
Classer les factures suivant l&rsquo;ordre d&rsquo;apparition sur les comptes
Gérer les notes de frais/indemnité kilométrique
Vérifier la TVA sur l&rsquo;outil comptable et potentiellement &ldquo;ventiler&rdquo; les dépenses
Relancer les factures
Il faudrait venir sur place une fois par mois pour faire le tri.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/developpement-akeneo/>Développement Akeneo</a></h2><div>Akeneo est un Product Information Management. Avec cet outil, vous pouvez gérer des collections de produits très facilement. Pour tous les formats, que ce soit web, print, les données ERP&mldr;
Le principe est que le PIM contient toutes les informations des produits et est le maitre de l&rsquo;information. Il est souvent couplé avec un Data Asset Management qui stocke les médias (photos, vidéos, musiques&mldr;).
Akeneo est développé en Symfony 2 et repose sur Oro Platform, un framework robuste et développé activement.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/0005-seocampus-2017/>Présentation Seocampus 2017</a></h2><div>Merci d&rsquo;être venu si nombreux à ma conférence au SEO Campus Paris 2017. J&rsquo;étais &ldquo;un peu&rdquo; stressé, j&rsquo;espère que ça vous a plu quand même.
Voici les liens des modules que j&rsquo;ai évoqués :
CreareSEO DnD Patch Index Url Et mes slides :
SEO et ecommerce sur Magento: retour d’expérience de Aurélien Lavorel Bonne journée !</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/phpunit/>PHPUnit QuickStart</a></h2><div>Installation composer require phpunit/phpunit Lancement Tout php vendor/phpunit/phpunit/phpunit Un groupe php vendor/phpunit/phpunit/phpunit --group critical Un fichier php vendor/phpunit/phpunit/phpunit app/code/community/Namespace/Module/Test/Model/Cms/CustomerTest.php Une méthode php vendor/phpunit/phpunit/phpunit --filter getGroupIdFromRole app/code/community/Namespace/Module/Test/Model/Cms/CustomerTest.php</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/docker-compose-auto-reverse-proxy/>Reverse proxy automatique pour Docker</a></h2><div>Dans cet article, on va voir comment faire un reverse proxy qui détecte l&rsquo;ajout d&rsquo;un site, génère un certificat SSL SAN pour les noms associés sans aucune action de notre part :)
Docker-compose Pour avoir un exemple plus parlant, on partira sur un site WordPress, créé avec docker-compose.
Træfɪk L&rsquo;outil magique qui nous servira de reverse proxy.
Structure . |-- acme | `-- acme.json |-- compose | `-- soins-naturels.net | |-- data | | |-- mysql | | `-- wp-content | `-- docker-compose.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/gitlab-private-registry-docker/>Un registry Docker privé avec GitLab</a></h2><div>Aller sur Gitlab.com
Créer un repo privé
Editer le projet :
Vérifier que l&rsquo;option &ldquo;Container Registry&rdquo; est activée puis sauvegarder le projet.
Voici la configuration que je recommande :
On a donc un repo privé, où on peut mettre notre Dockerfile ainsi que notre configuration spécifique, un README qui explique comment récupèrer un tag spécifique ainsi que notre registry Docker
Vous devriez avoir un nouvel onglet dans le projet :</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/hugo-github-page/>Hugo, GitHub Pages et Travis CI</a></h2><div>Introduction ### Hugo [Hugo](https://gohugo.io/) est un générateur de site statique, il est rapide, compatible toute plateforme et est très simple à prendre en main. Il est fourni avec un serveur intégré et l'extension live-reload, vous pouvez donc écrire un article en MarkDown et voir directement le résultat sans rafraîchir la page. Faire des sites statiques permets de réduire les coûts d&rsquo;hébergements et d&rsquo;enlever le risque de failles applicatives.
GitHub Pages GitHub permet d&rsquo;héberger gratuitement (en cas pas projet open-source) des documentations ou encore un site web.</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/mentions-legales/>Mentions Légales</a></h2><div>Conformément aux dispositions de la loi n° 2004-575 du 21 juin 2004 pour la confiance en l’économie numérique, il est précisé aux utilisateurs du site lumao.eu l’identité des différents intervenants dans le cadre de sa réalisation et de son suivi.
Edition du site Le site lumao.eu est édité par la société LUMAO SASU, au capital social de 100 euros, immatriculée au Registre du Commerce et des Sociétés d’Annecy sous le n° 83530565700016 et dont le siège social est situé au Lumao AXALP SERVICES 1 place Marie Curie 74000 Annecy (TVA intracommunautaire n° FR 68 835305657).</div></article></div><div class=section-about><article><h2><a href=https://lumao.eu/post/merci/>Merci de nous avoir contacté</a></h2><div>Nous avons bien reçu votre e-mail, nous vous contacterons prochainement.
À bientôt,
L&rsquo;équipe Lumao</div></article></div><div>1 sur 1</div></div><footer class=footer-bottom><p class=copyright>&copy; 2021 Lumao SASU <img src=https://lumao.eu/favicon-32x32.png alt="agence web Lumao" class=copyright__logo> - 835 305 657 R.C.S. Annecy - Développé avec <i class="fa fa-heart-o"></i>par LavoWeb - Annecy, France</p><p class=copyright>Nous nous déplaçons sur Annecy, Bordeaux, Chambéry, Grenoble, Lyon, Paris et dans toute la Haute-Savoie</p><p class=copyright>Le nom "Magento", "Magento 2" et le logo sont des marques commerciales de Magento, Inc.</p></footer><link rel=stylesheet href=https://lumao.eu/dist/all.css><script src=https://lumao.eu/dist/all.js></script><script>jQuery(document).ready(function(){jQuery('img').each(function(){jQuery(this).addClass('img-responsive');});jQuery('h2').each(function(){jQuery(this).addClass('title-middle');});});window.addEventListener('DOMContentLoaded',function(){var myLazyLoad=new LazyLoad({elements_selector:".lazy"});var myLazyLoadWebp=new LazyLoad({elements_selector:".lazy-webp",to_webp:true});},false);</script></body></html>